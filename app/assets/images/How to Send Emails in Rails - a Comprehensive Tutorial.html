<!DOCTYPE html>
<!-- saved from url=(0054)http://www.gotealeaf.com/blog/handling-emails-in-rails -->
<html class="js video maskImage placeholder" lang="en"><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  <title>How to Send Emails in Rails - a Comprehensive Tutorial </title>
  <meta name="author" content="Tealeaf Academy">

  
  <meta name="description" content="Step by step guide on sending out emails through rails application using ActionMailer, ActionMailer Previews, using a third party services such as …">
  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
  <link rel="canonical" href="./How to Send Emails in Rails - a Comprehensive Tutorial_files/How to Send Emails in Rails - a Comprehensive Tutorial.html">
  <link href="http://www.gotealeaf.com/blog/favicon.png" rel="icon">
  <link href="./How to Send Emails in Rails - a Comprehensive Tutorial_files/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="./How to Send Emails in Rails - a Comprehensive Tutorial_files/data-table.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://www.gotealeaf.com/blog/atom.xml" rel="alternate" title="Tealeaf Academy Blog" type="application/atom+xml">
  <script src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/cb=gapi.loaded_1" async=""></script><script src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript" async="" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/linkid.js"></script><script type="text/javascript" async="" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/plusone.js" gapi_processed="true"></script><script id="facebook-jssdk" async="" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/all.js"></script><script async="" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/analytics.js"></script><script src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/modernizr-2.0.js"></script>
  <script src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/octopress.js" type="text/javascript"></script>
  <script src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/jquery.cookie.js" type="text/javascript"></script>
  <script>
    $.cookie('_blog', 'true', { expires: 90, path: '/' });
  </script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="./How to Send Emails in Rails - a Comprehensive Tutorial_files/css" rel="stylesheet" type="text/css">
<link href="./How to Send Emails in Rails - a Comprehensive Tutorial_files/css(1)" rel="stylesheet" type="text/css">
<link href="./How to Send Emails in Rails - a Comprehensive Tutorial_files/css(2)" rel="stylesheet" type="text/css">
<script type="text/javascript" async="" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/count.js"></script><script type="text/javascript" async="" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/widgets.js"></script><style type="text/css">.fb_hidden{position:absolute;top:-10000px;z-index:10001}.fb_invisible{display:none}.fb_reset{background:none;border:0;border-spacing:0;color:#000;cursor:auto;direction:ltr;font-family:"lucida grande", tahoma, verdana, arial, sans-serif;font-size:11px;font-style:normal;font-variant:normal;font-weight:normal;letter-spacing:normal;line-height:1;margin:0;overflow:visible;padding:0;text-align:left;text-decoration:none;text-indent:0;text-shadow:none;text-transform:none;visibility:visible;white-space:normal;word-spacing:normal}.fb_reset>div{overflow:hidden}.fb_link img{border:none}
.fb_dialog{background:rgba(82, 82, 82, .7);position:absolute;top:-10000px;z-index:10001}.fb_reset .fb_dialog_legacy{overflow:visible}.fb_dialog_advanced{padding:10px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px}.fb_dialog_content{background:#fff;color:#333}.fb_dialog_close_icon{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 0 transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif);cursor:pointer;display:block;height:15px;position:absolute;right:18px;top:17px;width:15px}.fb_dialog_mobile .fb_dialog_close_icon{top:5px;left:5px;right:auto}.fb_dialog_padding{background-color:transparent;position:absolute;width:1px;z-index:-1}.fb_dialog_close_icon:hover{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -15px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_close_icon:active{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yq/r/IE9JII6Z1Ys.png) no-repeat scroll 0 -30px transparent;_background-image:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yL/r/s816eWC-2sl.gif)}.fb_dialog_loader{background-color:#f6f7f8;border:1px solid #606060;font-size:24px;padding:20px}.fb_dialog_top_left,.fb_dialog_top_right,.fb_dialog_bottom_left,.fb_dialog_bottom_right{height:10px;width:10px;overflow:hidden;position:absolute}.fb_dialog_top_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 0;left:-10px;top:-10px}.fb_dialog_top_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -10px;right:-10px;top:-10px}.fb_dialog_bottom_left{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -20px;bottom:-10px;left:-10px}.fb_dialog_bottom_right{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ye/r/8YeTNIlTZjm.png) no-repeat 0 -30px;right:-10px;bottom:-10px}.fb_dialog_vert_left,.fb_dialog_vert_right,.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{position:absolute;background:#525252;filter:alpha(opacity=70);opacity:.7}.fb_dialog_vert_left,.fb_dialog_vert_right{width:10px;height:100%}.fb_dialog_vert_left{margin-left:-10px}.fb_dialog_vert_right{right:0;margin-right:-10px}.fb_dialog_horiz_top,.fb_dialog_horiz_bottom{width:100%;height:10px}.fb_dialog_horiz_top{margin-top:-10px}.fb_dialog_horiz_bottom{bottom:0;margin-bottom:-10px}.fb_dialog_iframe{line-height:0}.fb_dialog_content .dialog_title{background:#6d84b4;border:1px solid #3a5795;color:#fff;font-size:14px;font-weight:bold;margin:0}.fb_dialog_content .dialog_title>span{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/yd/r/Cou7n-nqK52.gif) no-repeat 5px 50%;float:left;padding:5px 0 7px 26px}body.fb_hidden{-webkit-transform:none;height:100%;margin:0;overflow:visible;position:absolute;top:-10000px;left:0;width:100%}.fb_dialog.fb_dialog_mobile.loading{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/ya/r/3rhSv5V8j3o.gif) white no-repeat 50% 50%;min-height:100%;min-width:100%;overflow:hidden;position:absolute;top:0;z-index:10001}.fb_dialog.fb_dialog_mobile.loading.centered{max-height:590px;min-height:590px;max-width:500px;min-width:500px}#fb-root #fb_dialog_ipad_overlay{background:rgba(0, 0, 0, .45);position:absolute;left:0;top:0;width:100%;min-height:100%;z-index:10000}#fb-root #fb_dialog_ipad_overlay.hidden{display:none}.fb_dialog.fb_dialog_mobile.loading iframe{visibility:hidden}.fb_dialog_content .dialog_header{-webkit-box-shadow:white 0 1px 1px -1px inset;background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#738ABA), to(#2C4987));border-bottom:1px solid;border-color:#1d4088;color:#fff;font:14px Helvetica, sans-serif;font-weight:bold;text-overflow:ellipsis;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0;vertical-align:middle;white-space:nowrap}.fb_dialog_content .dialog_header table{-webkit-font-smoothing:subpixel-antialiased;height:43px;width:100%}.fb_dialog_content .dialog_header td.header_left{font-size:12px;padding-left:5px;vertical-align:middle;width:60px}.fb_dialog_content .dialog_header td.header_right{font-size:12px;padding-right:5px;vertical-align:middle;width:60px}.fb_dialog_content .touchable_button{background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#4966A6), color-stop(.5, #355492), to(#2A4887));border:1px solid #2f477a;-webkit-background-clip:padding-box;-webkit-border-radius:3px;-webkit-box-shadow:rgba(0, 0, 0, .117188) 0 1px 1px inset, rgba(255, 255, 255, .167969) 0 1px 0;display:inline-block;margin-top:3px;max-width:85px;line-height:18px;padding:4px 12px;position:relative}.fb_dialog_content .dialog_header .touchable_button input{border:none;background:none;color:#fff;font:12px Helvetica, sans-serif;font-weight:bold;margin:2px -12px;padding:2px 6px 3px 6px;text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog_content .dialog_header .header_center{color:#fff;font-size:16px;font-weight:bold;line-height:18px;text-align:center;vertical-align:middle}.fb_dialog_content .dialog_content{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat 50% 50%;border:1px solid #555;border-bottom:0;border-top:0;height:150px}.fb_dialog_content .dialog_footer{background:#f6f7f8;border:1px solid #555;border-top-color:#ccc;height:40px}#fb_dialog_loader_close{float:left}.fb_dialog.fb_dialog_mobile .fb_dialog_close_button{text-shadow:rgba(0, 30, 84, .296875) 0 -1px 0}.fb_dialog.fb_dialog_mobile .fb_dialog_close_icon{visibility:hidden}
.fb_iframe_widget{display:inline-block;position:relative}.fb_iframe_widget span{display:inline-block;position:relative;text-align:justify}.fb_iframe_widget iframe{position:absolute}.fb_iframe_widget_fluid_desktop,.fb_iframe_widget_fluid_desktop span,.fb_iframe_widget_fluid_desktop iframe{max-width:100%}.fb_iframe_widget_fluid_desktop iframe{min-width:220px;position:relative}.fb_iframe_widget_lift{z-index:1}.fb_hide_iframes iframe{position:relative;left:-10000px}.fb_iframe_widget_loader{position:relative;display:inline-block}.fb_iframe_widget_fluid{display:inline}.fb_iframe_widget_fluid span{width:100%}.fb_iframe_widget_loader iframe{min-height:32px;z-index:2;zoom:1}.fb_iframe_widget_loader .FB_Loader{background:url(https://fbstatic-a.akamaihd.net/rsrc.php/v2/y9/r/jKEcVPZFk-2.gif) no-repeat;height:32px;width:32px;margin-left:-16px;position:absolute;left:50%;z-index:4}</style></head><body class="collapse-sidebar sidebar-footer"><a href="https://plus.google.com/?rel=author">

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37357872-1', 'gotealeaf.com');
  ga('require', 'displayfeatures');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

  ga('create', 'UA-37357872-2', 'gotealeaf.com', {'name': 'secondtracker'});
  ga('secondtracker.require', 'displayfeatures');
  ga('secondtracker.require', 'linkid', 'linkid.js');
  ga('secondtracker.send', 'pageview');
</script>

  


  </a><header role="banner"><a href="https://plus.google.com/?rel=author"></a><hgroup><a href="https://plus.google.com/?rel=author">
  </a><h1><a href="https://plus.google.com/?rel=author"></a><a href="http://www.gotealeaf.com/blog/">Tealeaf Academy Blog</a></h1>
  
    <h2>Teaching Ruby on Rails Courses</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://www.gotealeaf.com/blog/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.gotealeaf.com/blog">
    <input class="search" type="text" name="q" results="0" placeholder="Search">
  </fieldset><fieldset class="mobile-nav"><select><option value="">Navigate…</option><option value="http://www.gotealeaf.com/blog/">» Blog</option><option value="http://www.gotealeaf.com/blog/archives">» Archives</option><option value="http://www.gotealeaf.com/">» Tealeaf Academy</option><option value="http://www.gotealeaf.com/blog/atom.xml">» RSS</option></select></fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="http://www.gotealeaf.com/blog/">Blog</a></li>
  <li><a href="http://www.gotealeaf.com/blog/archives">Archives</a></li>
  <li><a href="http://www.gotealeaf.com/">Tealeaf Academy</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Sending Emails in Rails Applications</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-11-11T08:38:15-05:00" pubdate="" data-updated="true">Nov 11<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><h2>Introduction</h2>

<p>In this article we will walk through a simple app to demonstrate how to send emails through a Rails application with ActionMailer, ActionMailer Preview, and through a third party email service provider such as Gmail or Mailgun. We will also demostrate how to use Active Job to send the email with a background processor.</p>

<p>You can find the code for this tutorial <a href="https://github.com/gotealeaf/sending_emails_with_rails">here</a></p>

<h2>Sending Emails Using ActionMailer and Gmail</h2>

<p>Now we will build a rails application which will send an email to the user when a new user is created. Let’s create a new rails application.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>rails new new_app_name
</span><span class="line"><span class="nv">$ </span>rails g scaffold user name:string email:string
</span><span class="line"><span class="nv">$ </span>rake db:migrate
</span></code></pre></td></tr></tbody></table></div></figure>


<p>We now have a basic application, let’s make use of ActionMailer. The mailer generator is similar to any other generator in rails.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>rails g mailer example_mailer
</span><span class="line">create  app/mailers/example_mailer.rb
</span><span class="line">invoke  erb
</span><span class="line">create    app/views/example_mailer
</span><span class="line">invoke  test_unit
</span><span class="line">create    <span class="nb">test</span>/mailers/example_mailer_test.rb
</span><span class="line">create    <span class="nb">test</span>/mailers/previews/example_mailer_preview.rb
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Our application is currently using <code>Rails 4.2.0.beta4</code> so the rails generator has created preview files for our application by default as <code>test/mailers/previews/example_mailer_preview.rb</code> which we will be using later.</p>

<p><code>app/mailers/example_mailer.rb</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">ExampleMailer</span> <span class="o">&lt;</span> <span class="ss">ActionMailer</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class="line">  <span class="n">default</span> <span class="ss">from</span><span class="p">:</span> <span class="s2">"from@example.com"</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Now let’s write methods and customized email. First you should change the default email address from <code>from@example.com</code> to the email address you want use as the sender’s address.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">ExampleMailer</span> <span class="o">&lt;</span> <span class="ss">ActionMailer</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class="line">  <span class="n">default</span> <span class="ss">from</span><span class="p">:</span> <span class="s2">"from@example.com"</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">sample_email</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@user</span> <span class="o">=</span> <span class="n">user</span>
</span><span class="line">    <span class="n">mail</span><span class="p">(</span><span class="ss">to</span><span class="p">:</span> <span class="vi">@user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span> <span class="ss">subject</span><span class="p">:</span> <span class="s1">'Sample Email'</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p><code>sample_email</code> takes user parameters and sends email using method <code>mail</code> to email address of user. In case you want to know about more features like attachment and multiple receivers, you can check out rails guide in the reference section. Now let’s write the mail we want to send to our users, and this can be done in <code>app/views/example_mailer</code>. Create a file <code>sample_email.html.erb</code> which is an email formatted in HTML.</p>

<p><code>app/views/example_mailer/sample_email.html.erb</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="o">&lt;!</span><span class="no">DOCTYPE</span> <span class="n">html</span><span class="o">&gt;</span>
</span><span class="line"><span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>
</span><span class="line">  <span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>
</span><span class="line">    <span class="o">&lt;</span><span class="n">meta</span> <span class="n">content</span><span class="o">=</span><span class="s1">'text/html; charset=UTF-8'</span> <span class="n">http</span><span class="o">-</span><span class="n">equiv</span><span class="o">=</span><span class="s1">'Content-Type'</span> <span class="sr">/&gt;</span>
</span><span class="line"><span class="sr">  &lt;/</span><span class="n">head</span><span class="o">&gt;</span>
</span><span class="line">  <span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
</span><span class="line">    <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="no">Hi</span> <span class="o">&lt;%=</span> <span class="vi">@user</span><span class="o">.</span><span class="n">name</span> <span class="sx">%&gt;&lt;/h1&gt;</span>
</span><span class="line">    <span class="o">&lt;</span><span class="nb">p</span><span class="o">&gt;</span>
</span><span class="line">      <span class="no">Sample</span> <span class="n">mail</span> <span class="n">sent</span> <span class="n">using</span> <span class="n">smtp</span><span class="o">.</span>
</span><span class="line">    <span class="o">&lt;</span><span class="sr">/p&gt;</span>
</span><span class="line"><span class="sr">  &lt;/</span><span class="n">body</span><span class="o">&gt;</span>
</span><span class="line"><span class="o">&lt;</span><span class="sr">/html&gt;</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>We also need to create the text part for this email as not all clients prefer HTML emails. Create <code>sample_email.text.erb</code> in the <code>app/views/example_mailer</code> directory.</p>

<p><code>app/views/example_mailer/sample_email.text.erb</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="no">Hi</span> <span class="o">&lt;%=</span> <span class="vi">@user</span><span class="o">.</span><span class="n">name</span> <span class="o">%&gt;</span>
</span><span class="line"><span class="no">Sample</span> <span class="n">mail</span> <span class="n">sent</span> <span class="n">using</span> <span class="n">smtp</span><span class="o">.</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>In the development environment we can use ActionMailer Preview to test our application. We are going to use the <code>test/mailers/previews/example_mailer_preview.rb</code> file created while generating mailers. We will just call any user (first user in this case) to preview the email.</p>

<p><code>test/mailers/previews/example_mailer_preview.rb</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="c1"># Preview all emails at http://localhost:3000/rails/mailers/example_mailer</span>
</span><span class="line"><span class="k">class</span> <span class="nc">ExampleMailerPreview</span> <span class="o">&lt;</span> <span class="ss">ActionMailer</span><span class="p">:</span><span class="ss">:Preview</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">sample_mail_preview</span>
</span><span class="line">    <span class="no">ExampleMailer</span><span class="o">.</span><span class="n">sample_email</span><span class="p">(</span><span class="no">User</span><span class="o">.</span><span class="n">first</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>When you visit <code>http://localhost:3000/rails/mailers/example_mailer/sample_mail_preview</code> you will see preview of the email.  By default email previews are placed in <code>test/mailers/previews</code>. You can change this by setting up different a path in <code>/config/environments/development.rb</code>. Just set <code>config.action_mailer.preview_path</code> to the desired path and add preview file to the corresponding location.</p>

<h2>Sending emails using ActionMailer and Gmail</h2>

<p>By default rails tries to send emails via <a href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol">SMTP</a>. We will provide SMTP configuration in environment settings <code>/config/environments/production.rb</code>. Let’s first look at the configuration you need to send emails with Gmail. Before we proceed we need to save sensitive information such as username and password as environment variables. We will do so by using the gem <code>figaro</code>. For detailed information on how to manage environment variables in rails refer to <a href="http://www.gotealeaf.com/blog/managing-environment-configuration-variables-in-rails">Manage Environment Configuration Variables in Rails</a>.</p>

<p><code>/config/application.yml</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">gmail_username</span><span class="p">:</span> <span class="s1">'username@gmail.com'</span>
</span><span class="line"><span class="n">gmail_password</span><span class="p">:</span> <span class="s1">'Gmail password'</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p><code>/config/environments/production.rb</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">config</span><span class="o">.</span><span class="n">action_mailer</span><span class="o">.</span><span class="n">delivery_method</span> <span class="o">=</span> <span class="ss">:smtp</span>
</span><span class="line"><span class="c1"># SMTP settings for gmail</span>
</span><span class="line"><span class="n">config</span><span class="o">.</span><span class="n">action_mailer</span><span class="o">.</span><span class="n">smtp_settings</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line"> <span class="ss">:address</span>              <span class="o">=&gt;</span> <span class="s2">"smtp.gmail.com"</span><span class="p">,</span>
</span><span class="line"> <span class="ss">:port</span>                 <span class="o">=&gt;</span> <span class="mi">587</span><span class="p">,</span>
</span><span class="line"> <span class="ss">:user_name</span>            <span class="o">=&gt;</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">'gmail_username'</span><span class="o">]</span><span class="p">,</span>
</span><span class="line"> <span class="ss">:password</span>             <span class="o">=&gt;</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">'gmail_password'</span><span class="o">]</span><span class="p">,</span>
</span><span class="line"> <span class="ss">:authentication</span>       <span class="o">=&gt;</span> <span class="s2">"plain"</span><span class="p">,</span>
</span><span class="line"><span class="ss">:enable_starttls_auto</span> <span class="o">=&gt;</span> <span class="kp">true</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Note here we are setting the app to send out emails with Gmail from the production environment. This is typically what you want because you don’t want to accidentally send out emails while working locally. If you run into errors like <code>Net::SMTPAuthenticationError</code> while using gmail for sending out emails, visit your <a href="https://www.google.com/settings/security/lesssecureapps">gmail settings</a> and enable less secure apps to get the application working.</p>

<p>Now let’s edit the UsersController to trigger the event that will send an email to a user. We just need to add <code>ExampleMailer.sample_email(@user).deliver</code> to the <code>create</code> method in <code>app/controllers/users_controller.rb</code>. The create method in <code>users_controller.rb</code> should look something like:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">def</span> <span class="nf">create</span>
</span><span class="line">  <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">user_params</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">  <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
</span><span class="line">    <span class="k">if</span> <span class="vi">@user</span><span class="o">.</span><span class="n">save</span>
</span><span class="line">
</span><span class="line">      <span class="c1"># Sends email to user when user is created.</span>
</span><span class="line">      <span class="no">ExampleMailer</span><span class="o">.</span><span class="n">sample_email</span><span class="p">(</span><span class="vi">@user</span><span class="p">)</span><span class="o">.</span><span class="n">deliver</span>
</span><span class="line">
</span><span class="line">      <span class="nb">format</span><span class="o">.</span><span class="n">html</span> <span class="p">{</span> <span class="n">redirect_to</span> <span class="vi">@user</span><span class="p">,</span> <span class="ss">notice</span><span class="p">:</span> <span class="s1">'User was successfully created.'</span> <span class="p">}</span>
</span><span class="line">      <span class="nb">format</span><span class="o">.</span><span class="n">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:show</span><span class="p">,</span> <span class="ss">status</span><span class="p">:</span> <span class="ss">:created</span><span class="p">,</span> <span class="ss">location</span><span class="p">:</span> <span class="vi">@user</span> <span class="p">}</span>
</span><span class="line">    <span class="k">else</span>
</span><span class="line">      <span class="nb">format</span><span class="o">.</span><span class="n">html</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">:new</span> <span class="p">}</span>
</span><span class="line">      <span class="nb">format</span><span class="o">.</span><span class="n">json</span> <span class="p">{</span> <span class="n">render</span> <span class="ss">json</span><span class="p">:</span> <span class="vi">@user</span><span class="o">.</span><span class="n">errors</span><span class="p">,</span> <span class="ss">status</span><span class="p">:</span> <span class="ss">:unprocessable_entity</span> <span class="p">}</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>When a new user is created we are sending out an email via the <code>sample_email</code> method in mailer <code>ExampleMailer</code>.</p>

<h2>Sending emails using ActionMailer and Mailgun through SMTP</h2>

<p>Let’s see how to use mailgun to send out emails. First <a href="https://mailgun.com/signup">create a free account on Mailgun</a>. Once done you will be redirected to the dashboard. We will be using mailgun subdomains. Click on the sandbox, you should see something like this:</p>

<p><img src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/mailgun.png" title="Mailgun Sandbox Server"></p>

<p>We are going to need information listed to get mailgun working for our application. Let’s store the credentials in <code>/config/application.yml</code>.</p>

<p><code>/config/application.yml</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">api_key</span><span class="p">:</span> <span class="s1">'API Key'</span>
</span><span class="line"><span class="ss">domain</span><span class="p">:</span> <span class="s1">'Domain'</span>
</span><span class="line"><span class="ss">username</span><span class="p">:</span> <span class="s1">'Default SMTP Login'</span>
</span><span class="line"><span class="ss">password</span><span class="p">:</span> <span class="s1">'Default Password'</span>
</span><span class="line"><span class="n">gmail_username</span><span class="p">:</span> <span class="s1">'username@gmail.com'</span>
</span><span class="line"><span class="n">gmail_password</span><span class="p">:</span> <span class="s1">'gmail password'</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Replace the corresponding credentials received from domain information of sandbox server. We must also change SMTP settings as we are now using Mailgun instead of Gmail.</p>

<p><code>/config/environments/production.rb</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">config</span><span class="o">.</span><span class="n">action_mailer</span><span class="o">.</span><span class="n">delivery_method</span> <span class="o">=</span> <span class="ss">:smtp</span>
</span><span class="line"><span class="c1"># SMTP settings for mailgun</span>
</span><span class="line"><span class="ss">ActionMailer</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">smtp_settings</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">  <span class="ss">:port</span>           <span class="o">=&gt;</span> <span class="mi">587</span><span class="p">,</span>
</span><span class="line">  <span class="ss">:address</span>        <span class="o">=&gt;</span> <span class="s2">"smtp.mailgun.org"</span><span class="p">,</span>
</span><span class="line">  <span class="ss">:domain</span>         <span class="o">=&gt;</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">'domain'</span><span class="o">]</span><span class="p">,</span>
</span><span class="line">  <span class="ss">:user_name</span>      <span class="o">=&gt;</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">'username'</span><span class="o">]</span><span class="p">,</span>
</span><span class="line">  <span class="ss">:password</span>       <span class="o">=&gt;</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">'password'</span><span class="o">]</span><span class="p">,</span>
</span><span class="line">  <span class="ss">:authentication</span> <span class="o">=&gt;</span> <span class="ss">:plain</span><span class="p">,</span>
</span><span class="line"><span class="p">}}</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<h2>Sending emails using ActionMailer and Mailgun through Mailgun’s APIs</h2>

<p><a href="https://github.com/mailgun/mailgun-ruby">The official ruby library</a> of Mailgun <code>mailgun-ruby</code> empowers users and developers to take advantage of the Mailgun APIs. To use it first add <code>gem 'mailgun-ruby', '~&gt;1.0.2', require: 'mailgun'</code> to your Gemfile and run <code>bundle install</code>. Finally make changes to <code>app/mailers/example_mailer.rb</code>.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">ExampleMailer</span> <span class="o">&lt;</span> <span class="ss">ActionMailer</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">sample_email</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@user</span> <span class="o">=</span> <span class="n">user</span>
</span><span class="line">    <span class="n">mg_client</span> <span class="o">=</span> <span class="ss">Mailgun</span><span class="p">:</span><span class="ss">:Client</span><span class="o">.</span><span class="n">new</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">'api_key'</span><span class="o">]</span>
</span><span class="line">    <span class="n">message_params</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:from</span>    <span class="o">=&gt;</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">'gmail_username'</span><span class="o">]</span><span class="p">,</span>
</span><span class="line">                      <span class="ss">:to</span>      <span class="o">=&gt;</span> <span class="vi">@user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span>
</span><span class="line">                      <span class="ss">:subject</span> <span class="o">=&gt;</span> <span class="s1">'Sample Mail using Mailgun API'</span><span class="p">,</span>
</span><span class="line">                      <span class="ss">:text</span>    <span class="o">=&gt;</span> <span class="s1">'This mail is sent using Mailgun API via mailgun-ruby'</span><span class="p">}</span>
</span><span class="line">    <span class="n">mg_client</span><span class="o">.</span><span class="n">send_message</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">'domain'</span><span class="o">]</span><span class="p">,</span> <span class="n">message_params</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p><code>Mailgun::Client.new</code> initiates mailgun client using the API keys. In <code>message_params</code> we are providing custom email information and <code>.send_message</code> takes care of sending emails via Mailgun API. You should change <code>from@example.com</code> to desired sender’s email address.</p>

<h2>Sending Emails with a Background Processor through Active Job</h2>

<p>While testing the application you might have noticed that it takes takes more time than usual to create a new user. This happens because we have to hit an external API to send out emails. This can be an issue if you are sending multiple emails or sending emails to multiple users. This problem can be easily resolved by moving the email sending part to background jobs. In our application we will make use of <a href="http://api.rubyonrails.org/">Active Jobs</a> and <a href="http://www.mailgun.com/pricing">Delayed Job</a> to send emails in the background.</p>

<p>Active Job is an adapter that provides a universal interface for background processors like Resque, Delayed Job, Sidekiq, etc. Note that for using Active Job you will need Rails 4.2 or above.</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>rails g job send_email
</span><span class="line">  invoke  test_unit
</span><span class="line">  create    <span class="nb">test</span>/jobs/send_email_job_test.rb
</span><span class="line">  create  app/jobs/send_email_job.rb
</span><span class="line"><span class="err">$</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Now let’s the write the job to be performed by workers. Active Job is integrated with ActionMailer so you can easily send emails asynchronously. For sending emails through Active Job we use <code>deliver_later</code> method.</p>

<p><code>/app/jobs/send_email_job.rb</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">class</span> <span class="nc">SendEmailJob</span> <span class="o">&lt;</span> <span class="ss">ActiveJob</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class="line">  <span class="n">queue_as</span> <span class="ss">:default</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">perform</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@user</span> <span class="o">=</span> <span class="n">user</span>
</span><span class="line">    <span class="no">ExampleMailer</span><span class="o">.</span><span class="n">sample_email</span><span class="p">(</span><span class="vi">@user</span><span class="p">)</span><span class="o">.</span><span class="n">deliver_later</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Now let’s make changes to our user creation process. Instead of sending email while creating the user we enqueue the email sending job to be performed later.</p>

<p><code>app/controllers/users_controller.rb</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line">  <span class="k">def</span> <span class="nf">create</span>
</span><span class="line">    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</span><span class="line">    <span class="no">SendEmailJob</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="ss">wait</span><span class="p">:</span> <span class="mi">20</span><span class="o">.</span><span class="n">seconds</span><span class="p">)</span><span class="o">.</span><span class="n">perform_later</span><span class="p">(</span><span class="vi">@user</span><span class="p">)</span>
</span><span class="line">    <span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">.</span>
</span><span class="line">  <span class="k">end</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Now we need to configure the backend for our background process. We have selected <code>delayed_jobs</code> as our backend but you can choose your own backend depedning on your needs. Active Job has built-in adapters for multiple queueing backends.</p>

<p><code>Gemfile</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">gem</span> <span class="s1">'delayed_job_active_record'</span>
</span></code></pre></td></tr></tbody></table></div></figure>




<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>bundle
</span><span class="line"><span class="nv">$ </span>rails generate delayed_job:active_record
</span><span class="line"><span class="nv">$ </span>rake db:migrate
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Set up queueing backend for the production environment.</p>

<p><code>/config/environments/production.rb</code></p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">config</span><span class="o">.</span><span class="n">active_job</span><span class="o">.</span><span class="n">queue_adapter</span> <span class="o">=</span> <span class="ss">:delayed_job</span>
</span></code></pre></td></tr></tbody></table></div></figure>


<p>Everything is configured now, for testing the application just start the rails server and create a new user. A new job will be added to the queue and  you will notice the time required for creating a new user is drastically decreased. You can start running the jobs in queue by:</p>

<figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tbody><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nv">$ </span>bundle <span class="nb">exec </span>rake <span class="nb">jobs</span>:work
</span></code></pre></td></tr></tbody></table></div></figure>


<h2>Conclusion</h2>

<p>In the article we went over basic configuration and tools used for sending emails through a rails application. We covered the basics of ActionMailer, Gmail &amp; Mailgun (as email sending services), ActionMailer Previews(for previewing emails) and <code>mailgun-ruby</code> gem for the Mailgun APIs. In the end, we showed how to send out emails with a background processor through Active Job.</p>

<h2>References/Resources</h2>

<ul>
<li><a href="http://guides.rubyonrails.org/action_mailer_basics.html">Ruby on Rails Guide</a></li>
<li><a href="http://api.rubyonrails.org/">Ruby on Rails API</a></li>
<li><a href="http://api.rubyonrails.org/v4.1.0/classes/ActionMailer/Base.html#class-ActionMailer::Base-label-Previewing+emails">ActionMailer Preview</a></li>
<li><a href="http://documentation.mailgun.com/">Mailgun Documentation</a></li>
<li><a href="https://github.com/mailgun/mailgun-ruby">Mailgun gem</a></li>
<li><a href="https://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol">SMTP</a></li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Saurabh B</span></span>

      








  


<time datetime="2014-11-11T08:38:15-05:00" pubdate="" data-updated="true">Nov 11<span>th</span>, 2014</time>
      


    </p>
    
      <div class="sharing">
  
  <iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/tweet_button.bd0320cab493e168513c7173184c1d5c.en.html" class="twitter-share-button twitter-tweet-button twitter-share-button twitter-count-horizontal" title="Twitter Tweet Button" data-twttr-rendered="true" style="position: static; visibility: visible; width: 80px; height: 20px;"></iframe>
  
  
  <div id="___plusone_0" style="text-indent: 0px; margin: 0px; padding: 0px; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px; background: transparent;"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" width="100%" id="I0_1438805618418" name="I0_1438805618418" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/fastbutton.html" data-gapiattached="true" title="+1"></iframe></div>
  
  
    <div class="fb-like fb_iframe_widget" data-send="true" data-width="450" data-show-faces="false" fb-xfbml-state="rendered" fb-iframe-plugin-query="app_id=212934732101925&amp;container_width=850&amp;href=http%3A%2F%2Fwww.gotealeaf.com%2Fblog%2Fhandling-emails-in-rails&amp;locale=en_US&amp;sdk=joey&amp;send=true&amp;show_faces=false&amp;width=450"><span style="vertical-align: bottom; width: 450px; height: 20px;"><iframe name="f392fbff9" width="450px" height="1000px" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" title="fb:like Facebook Social Plugin" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/like.html" style="border: none; visibility: visible; width: 450px; height: 20px;" class=""></iframe></span></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="http://www.gotealeaf.com/blog/paypal-recurring-payments" title="Previous Post: Process Payments with Paypal in Rails, Part 3 - Recurring Payments">« Process Payments with Paypal in Rails, Part 3 - Recurring Payments</a>
      
      
        <a class="basic-alignment right" href="http://www.gotealeaf.com/blog/setting-up-your-production-server-with-nginx-and-unicorn" title="Next Post: Setting Up Your Production Server With Nginx And Unicorn">Setting Up Your Production Server With Nginx And Unicorn »</a>
      
    </p>
  </footer>
</article>


</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="http://www.gotealeaf.com/blog/stripe-coupons">Stripe Payments in Rails, Part 4 - Plan Discounts with Coupons</a>
      </li>
    
      <li class="post">
        <a href="http://www.gotealeaf.com/blog/stripe-recurring">Stripe Payments in Rails, Part 3 - Recurring Payments</a>
      </li>
    
      <li class="post">
        <a href="http://www.gotealeaf.com/blog/stripe-js">Stripe Payments in Rails, Part 2 - Use Custom Forms with Stripe.js</a>
      </li>
    
      <li class="post">
        <a href="http://www.gotealeaf.com/blog/stripe-checkout">Stripe payments in Rails, Part 1 - Stripe Checkout</a>
      </li>
    
      <li class="post">
        <a href="http://www.gotealeaf.com/blog/cron-jobs-and-rails">Cron Jobs and Rails</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright © 2015 - Tealeaf Academy -
  <span class="credit">Powered by <a href="http://octopress.org/">Octopress</a> | Themed with <a href="https://github.com/lucaslew/whitespace">Whitespace</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'tealeafblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






<div id="fb-root" class=" fb_reset"><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="fb_xdm_frame_http" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_http" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/BhKMRj1sUPu.html" style="border: none;"></iframe><iframe name="fb_xdm_frame_https" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" id="fb_xdm_frame_https" aria-hidden="true" title="Facebook Cross Domain Communication Frame" tabindex="-1" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/BhKMRj1sUPu(1).html" style="border: none;"></iframe></div></div><div style="position: absolute; top: -10000px; height: 0px; width: 0px;"><div><iframe name="f1deb492c4" frameborder="0" allowtransparency="true" allowfullscreen="true" scrolling="no" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/ping.html" style="display: none;"></iframe></div></div></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>







<iframe name="oauth2relay402957225" id="oauth2relay402957225" src="./How to Send Emails in Rails - a Comprehensive Tutorial_files/postmessageRelay.html" tabindex="-1" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe></body></html>